<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salgados da Sara</title>
    <link rel="icon" type="image/svg+xml" href="public/fundo.svg" />
    
    <!-- Estilos CSS -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/auth.css">
    <link rel="stylesheet" href="styles/menu.css">
    <link rel="stylesheet" href="styles/cart.css">
    <link rel="stylesheet" href="styles/profile.css">
    <link rel="stylesheet" href="styles/admin.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Carregando...</p>
    </div>

    <!-- Message Display -->
    <div id="message" class="message" style="display: none;"></div>

    <!-- Navigation -->
    <nav id="navbar" class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="public/fundo.png" alt="Logo" class="nav-logo">
                <h1>Salgados da Sara</h1>
            </div>
            <div class="nav-menu">
                <button class="nav-btn active" onclick="showPage('cardapio')">Card√°pio</button>
                <button class="nav-btn cart-btn" onclick="showPage('carrinho')">
                    Carrinho
                    <span id="cart-count" class="cart-count">0</span>
                </button>
                <button class="nav-btn" onclick="showPage('historico')">Hist√≥rico</button>
                <button class="nav-btn" onclick="showPage('perfil')">Perfil</button>
            </div>
            <div class="nav-state">
                <button class="nav-btn" onclick="App.showAuthPages()">Login</button>
                <button class="nav-btn logout-btn" onclick="logout()" style="display: none;">Sair</button>
            </div>
        </div>
    </nav>

    <!-- Login Page -->
    <div id="login-page" class="auth-page page" style="display: none;">
        <div class="auth-container">
            <div class="auth-header">
                <img src="public/fundo.png" alt="Logo" class="auth-logo">
                <h1>Entrar</h1>
                <p>Acesse sua conta para fazer pedidos</p>
            </div>
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <input type="tel" name="phone" placeholder="Telefone" required>
                </div>
                <div class="form-group">
                    <div class="password-input">
                        <input type="password" id="login-password" name="password" placeholder="Senha" required>
                        <button type="button" class="toggle-password" onclick="togglePassword('login-password')">üëÅÔ∏è</button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Entrar</button>
            </form>
            <div class="auth-links">
                <a href="#" onclick="showRegister()">N√£o tem conta? Cadastre-se</a>
                <a href="#" onclick="showForgotPassword()">Esqueceu a senha?</a>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="register-page" class="auth-page page" style="display: none;">
        <div class="auth-container">
            <div class="auth-header">
                <img src="public/fundo.png" alt="Logo" class="auth-logo">
                <h1>Cadastrar</h1>
                <p>Crie sua conta para fazer pedidos</p>
            </div>
            <form id="register-form" class="auth-form">
                <div class="form-group">
                    <input type="text" name="name" placeholder="Nome completo" required>
                </div>
                <div class="form-group">
                    <input type="tel" name="phone" placeholder="Telefone" required>
                </div>
                <div class="form-group">
                    <input type="email" name="email" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="text" name="address" placeholder="Endere√ßo" required>
                </div>
                <div class="form-group">
                    <input type="text" name="number" placeholder="N√∫mero" required>
                </div>
                <div class="form-group">
                    <input type="text" name="complement" placeholder="Complemento (opcional)">
                </div>
                <div class="form-group">
                    <input type="text" name="neighborhood" placeholder="Bairro (opcional)">
                </div>
                <div class="form-group">
                    <input type="text" name="cep" placeholder="CEP (opcional)">
                </div>
                <div class="form-group">
                    <select name="city" required>
                        <option value="">Selecione uma cidade</option>
                        <option value="Quinze de Novembro">Quinze de Novembro</option>
                        <option value="Selbach">Selbach</option>
                        <option value="Colorado">Colorado</option>
                        <option value="Alto Alegre">Alto Alegre</option>
                        <option value="Fortaleza dos Valos">Fortaleza dos Valos</option>
                        <option value="Tapera">Tapera</option>
                        <option value="Lagoa dos Tr√™s Cantos">Lagoa dos Tr√™s Cantos</option>
                        <option value="Saldanha Marinho">Saldanha Marinho</option>
                        <option value="Espumoso">Espumoso</option>
                        <option value="Campos Borges">Campos Borges</option>
                        <option value="Santa B√°rbara do Sul">Santa B√°rbara do Sul</option>
                        <option value="N√£o-Me-Toque">N√£o-Me-Toque</option>
                        <option value="Boa Vista do Cadeado">Boa Vista do Cadeado</option>
                        <option value="Boa Vista do Incra">Boa Vista do Incra</option>
                        <option value="Carazinho">Carazinho</option>
                        <option value="Ibirub√°">Ibirub√°</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="password-input">
                        <input type="password" id="register-password" name="password" placeholder="Senha" required>
                        <button type="button" class="toggle-password" onclick="togglePassword('register-password')">üëÅÔ∏è</button>
                    </div>
                    <div class="password-requirements">
                        A senha deve ter pelo menos 6 caracteres, 1 mai√∫scula, 1 n√∫mero e 1 caractere especial
                    </div>
                </div>
                <div class="form-group">
                    <div class="password-input">
                        <input type="password" id="confirm-password" name="confirmPassword" placeholder="Confirmar senha" required>
                        <button type="button" class="toggle-password" onclick="togglePassword('confirm-password')">üëÅÔ∏è</button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Cadastrar</button>
            </form>
            <div class="auth-links">
                <a href="#" onclick="showLogin()">J√° tem conta? Entre</a>
            </div>
        </div>
    </div>

    <!-- Forgot Password Page -->
    <div id="forgot-password-page" class="auth-page page" style="display: none;">
        <div class="auth-container">
            <div class="auth-header">
                <img src="public/fundo.png" alt="Logo" class="auth-logo">
                <h1>Recuperar Senha</h1>
                <p>Digite seu telefone para receber instru√ß√µes</p>
            </div>
            <form id="forgot-password-form" class="auth-form">
                <div class="form-group">
                    <input type="tel" name="phone" placeholder="Telefone" required>
                </div>
                <button type="submit" class="btn btn-primary">Enviar Instru√ß√µes</button>
            </form>
            <div class="auth-links">
                <a href="#" onclick="showLogin()">Voltar ao login</a>
            </div>
        </div>
    </div>

    <!-- Menu Page -->
    <div id="cardapio-page" class="main-page page">
        <div class="menu-container">
            <div class="menu-header">
                <h2>Nosso Card√°pio</h2>
                <p>Escolha seus salgados favoritos</p>
            </div>
            
            <div class="menu-categories">
                <button class="category-btn active" onclick="filterMenu('todos')">TODOS</button>
                <button class="category-btn" onclick="filterMenu('salgados')">SALGADOS FRITOS</button>
                <button class="category-btn" onclick="filterMenu('sortidos')">SORTIDOS</button>
                <button class="category-btn" onclick="filterMenu('assados')">ASSADOS</button>
                <button class="category-btn" onclick="filterMenu('especiais')">ESPECIAIS</button>
                <button class="category-btn" onclick="filterMenu('opcionais')">OPCIONAIS</button>
            </div>
            
            <div id="menu-items" class="menu-items">
                <!-- Menu items will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Cart Page -->
    <div id="carrinho-page" class="main-page page" style="display: none;">
        <div class="cart-container">
            <div class="cart-header">
                <h2>Seu Carrinho</h2>
                <p>Revise seus itens antes de finalizar</p>
            </div>
            
            <div id="cart-items" class="cart-items">
                <!-- Cart items will be loaded here -->
            </div>
            
            <div class="cart-summary">
                <div class="delivery-options">
                    <h3>Forma de Entrega</h3>
                    <label class="radio-label">
                        <input type="radio" name="delivery" value="pickup" checked>
                        <span class="radio-custom"></span>
                        Retirada no Local
                        <small>Rua Ida Berlet, 1738 B - Quinze de Novembro</small>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="delivery" value="delivery">
                        <span class="radio-custom"></span>
                        Entrega em Domic√≠lio
                        <small>Taxa de entrega ser√° calculada</small>
                    </label>
                </div>

                <div id="delivery-address-selection" class="delivery-address-selection" style="display: none;">
                    <h4>Selecione o endere√ßo de entrega:</h4>
                    <div id="address-options">
                        <!-- Address options will be loaded here -->
                    </div>
                </div>
                
                <div class="cart-total">
                    <div class="total-line">
                        <span>Subtotal:</span>
                        <span id="subtotal">R$ 0,00</span>
                    </div>
                    <div class="total-line">
                        <span>Taxa de Entrega:</span>
                        <span id="delivery-fee">R$ 0,00</span>
                    </div>
                    <div class="total-line total">
                        <span>Total:</span>
                        <span id="total">R$ 0,00</span>
                    </div>
                </div>
                
                <button id="continue-btn" class="btn btn-primary" onclick="showPayment()">
                    Continuar para Pagamento
                </button>
            </div>
        </div>
    </div>

    <!-- Payment Page -->
    <div id="payment-page" class="main-page page" style="display: none;">
        <div class="payment-container">
            <div class="payment-header">
                <h2>Finalizar Pedido</h2>
                <p>Escolha a forma de pagamento</p>
            </div>
            
            <div class="payment-methods">
                <h3>Forma de Pagamento</h3>
                <label class="radio-label">
                    <input type="radio" name="payment" value="cash" checked>
                    <span class="radio-custom"></span>
                    Dinheiro
                </label>
                <label class="radio-label">
                    <input type="radio" name="payment" value="card">
                    <span class="radio-custom"></span>
                    Cart√£o (na entrega)
                </label>
                <label class="radio-label">
                    <input type="radio" name="payment" value="pix">
                    <span class="radio-custom"></span>
                    PIX
                </label>
            </div>
            
            <div class="payment-actions">
                <button class="btn btn-secondary" onclick="showPage('carrinho')">Voltar</button>
                <button class="btn btn-primary" onclick="finalizeOrder()">Finalizar Pedido</button>
            </div>
        </div>
    </div>

    <!-- History Page -->
    <div id="historico-page" class="main-page page" style="display: none;">
        <div class="history-container">
            <div class="history-header">
                <h2>Hist√≥rico de Pedidos</h2>
                <p>Acompanhe seus pedidos anteriores</p>
            </div>
            
            <div id="history-items" class="history-items">
                <!-- History items will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="perfil-page" class="main-page page" style="display: none;">
        <div class="profile-container">
            <div class="profile-header">
                <h2>Meu Perfil</h2>
                <p>Gerencie suas informa√ß√µes pessoais</p>
            </div>
            
            <div class="profile-sections">
                <div class="profile-nav">
                    <button class="profile-nav-btn active" onclick="showProfileSection('info')">Informa√ß√µes</button>
                    <button class="profile-nav-btn" onclick="showProfileSection('password')">Senha</button>
                    <button class="profile-nav-btn" onclick="showProfileSection('addresses')">Endere√ßos</button>
                </div>
                
                <div class="profile-content">
                    <!-- User Info Section -->
                    <div id="profile-info" class="profile-section">
                        <h3>Informa√ß√µes Pessoais</h3>
                        <form id="profile-info-form">
                            <div class="form-group">
                                <label for="profile-name">Nome Completo</label>
                                <input type="text" id="profile-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="profile-phone">Telefone</label>
                                <input type="tel" id="profile-phone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="profile-email">Email</label>
                                <input type="email" id="profile-email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="profile-address">Endere√ßo</label>
                                <input type="text" id="profile-address" name="address" required>
                            </div>
                            <div class="form-group">
                                <label for="profile-number">N√∫mero</label>
                                <input type="text" id="profile-number" name="number" required>
                            </div>
                            <div class="form-group">
                                <label for="profile-complement">Complemento</label>
                                <input type="text" id="profile-complement" name="complement">
                            </div>
                            <div class="form-group">
                                <label for="profile-city">Cidade</label>
                                <select id="profile-city" name="city" required>
                                    <option value="">Selecione uma cidade</option>
                                    <option value="Quinze de Novembro">Quinze de Novembro</option>
                                    <option value="Selbach">Selbach</option>
                                    <option value="Colorado">Colorado</option>
                                    <option value="Alto Alegre">Alto Alegre</option>
                                    <option value="Fortaleza dos Valos">Fortaleza dos Valos</option>
                                    <option value="Tapera">Tapera</option>
                                    <option value="Lagoa dos Tr√™s Cantos">Lagoa dos Tr√™s Cantos</option>
                                    <option value="Saldanha Marinho">Saldanha Marinho</option>
                                    <option value="Espumoso">Espumoso</option>
                                    <option value="Campos Borges">Campos Borges</option>
                                    <option value="Santa B√°rbara do Sul">Santa B√°rbara do Sul</option>
                                    <option value="N√£o-Me-Toque">N√£o-Me-Toque</option>
                                    <option value="Boa Vista do Cadeado">Boa Vista do Cadeado</option>
                                    <option value="Boa Vista do Incra">Boa Vista do Incra</option>
                                    <option value="Carazinho">Carazinho</option>
                                    <option value="Ibirub√°">Ibirub√°</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
                        </form>
                    </div>
                    
                    <!-- Password Section -->
                    <div id="profile-password" class="profile-section" style="display: none;">
                        <h3>Alterar Senha</h3>
                        <form id="change-password-form">
                            <div class="form-group">
                                <label for="current-password">Senha Atual</label>
                                <div class="password-input">
                                    <input type="password" id="current-password" name="currentPassword" required>
                                    <button type="button" class="toggle-password" onclick="togglePassword('current-password')">üëÅÔ∏è</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="new-password">Nova Senha</label>
                                <div class="password-input">
                                    <input type="password" id="new-password" name="newPassword" required>
                                    <button type="button" class="toggle-password" onclick="togglePassword('new-password')">üëÅÔ∏è</button>
                                </div>
                                <div class="password-requirements">
                                    A senha deve ter pelo menos 6 caracteres, 1 mai√∫scula, 1 n√∫mero e 1 caractere especial
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="confirm-new-password">Confirmar Nova Senha</label>
                                <div class="password-input">
                                    <input type="password" id="confirm-new-password" name="confirmNewPassword" required>
                                    <button type="button" class="toggle-password" onclick="togglePassword('confirm-new-password')">üëÅÔ∏è</button>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Alterar Senha</button>
                        </form>
                    </div>
                    
                    <!-- Addresses Section -->
                    <div id="profile-addresses" class="profile-section" style="display: none;">
                        <div class="addresses-header">
                            <h3>Meus Endere√ßos</h3>
                            <button class="btn btn-primary" onclick="showAddAddressModal()">Adicionar Endere√ßo</button>
                        </div>
                        <div id="addresses-list" class="addresses-list">
                            <!-- Addresses will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="admin-page" class="admin-page page" style="display: none;">
        <!-- Admin Login -->
        <div id="admin-login" class="admin-login">
            <div class="auth-container">
                <div class="auth-header">
                    <img src="public/fundo.png" alt="Logo" class="auth-logo">
                    <h1>Painel Administrativo</h1>
                    <p>Acesso restrito para administradores</p>
                </div>
                <form id="admin-login-form" class="auth-form">
                    <div class="form-group">
                        <input type="text" name="username" placeholder="Usu√°rio" required>
                    </div>
                    <div class="form-group">
                        <div class="password-input">
                            <input type="password" id="admin-password" name="password" placeholder="Senha" required>
                            <button type="button" class="toggle-password" onclick="togglePassword('admin-password')">üëÅÔ∏è</button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Entrar</button>
                </form>
                <div class="auth-links">
                    <a href="/">Voltar ao site</a>
                </div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="admin-panel" class="admin-panel" style="display: none;">
            <div class="admin-nav">
                <div class="admin-nav-header">
                    <img src="public/fundo.png" alt="Logo" class="admin-logo">
                    <h2>Admin Panel</h2>
                </div>
                <div class="admin-menu">
                    <button class="admin-btn active" onclick="showAdminSection('pedidos')">Pedidos</button>
                    <button class="admin-btn" onclick="showAdminSection('produtos')">Produtos</button>
                    <button class="admin-btn" onclick="showAdminSection('administradores')">Administradores</button>
                    <button class="admin-btn" onclick="showAdminSection('configuracoes')">Configura√ß√µes</button>
                    <button class="admin-btn logout-btn" onclick="adminLogout()">Sair</button>
                </div>
            </div>
            
            <div class="admin-content">
                <!-- Orders Section -->
                <div id="admin-pedidos" class="admin-section">
                    <h3>Gerenciar Pedidos</h3>
                    <div id="admin-orders" class="admin-orders">
                        <!-- Orders will be loaded here -->
                    </div>
                </div>
                
                <!-- Products Section -->
                <div id="admin-produtos" class="admin-section" style="display: none;">
                    <h3>Gerenciar Produtos</h3>
                    <button class="btn btn-primary" onclick="showAddProduct()">Adicionar Produto</button>
                    <div id="admin-products" class="admin-products">
                        <!-- Products will be loaded here -->
                    </div>
                </div>
                
                <!-- Admins Section -->
                <div id="admin-administradores" class="admin-section" style="display: none;">
                    <h3>Gerenciar Administradores</h3>
                    <button class="btn btn-primary" onclick="showAddAdmin()">Adicionar Administrador</button>
                    <div id="admin-admins" class="admin-admins">
                        <!-- Admins will be loaded here -->
                    </div>
                </div>
                
                <!-- Config Section -->
                <div id="admin-configuracoes" class="admin-section" style="display: none;">
                    <h3>Configura√ß√µes</h3>
                    <div class="config-item">
                        <label for="delivery-price">Taxa de Entrega (R$):</label>
                        <input type="number" id="delivery-price" step="0.01" min="0" value="10.00">
                        <button class="btn btn-primary" onclick="updateDeliveryPrice()">Salvar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quantity Modal -->
    <div id="quantity-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-item-name">Selecionar Quantidade</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="quantity-options">
                    <label class="radio-label">
                        <input type="radio" name="quantity-type" value="cento" checked>
                        <span class="radio-custom"></span>
                        Cento - <span id="price-cento">R$ 0,00</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="quantity-type" value="meio-cento">
                        <span class="radio-custom"></span>
                        Meio Cento - <span id="price-meio-cento">R$ 0,00</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="quantity-type" value="unidade">
                        <span class="radio-custom"></span>
                        Por Unidade - <span id="price-unidade">R$ 0,00</span> cada
                    </label>
                </div>
                
                <div id="unit-quantity" class="unit-quantity" style="display: none;">
                    <label for="unit-count">Quantidade de unidades (m√≠nimo 10):</label>
                    <input type="number" id="unit-count" min="10" value="10">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="addToCart()">Adicionar ao Carrinho</button>
            </div>
        </div>
    </div>

    <!-- Add Address Modal -->
    <div id="add-address-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Adicionar Endere√ßo</h3>
                <span class="close" onclick="closeAddressModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="add-address-form">
                    <div class="form-group">
                        <label for="address-name">Nome do Endere√ßo</label>
                        <input type="text" id="address-name" name="name" placeholder="Ex: Casa, Trabalho" required>
                    </div>
                    <div class="form-group">
                        <label for="address-street">Endere√ßo</label>
                        <input type="text" id="address-street" name="address" required>
                    </div>
                    <div class="form-group">
                        <label for="address-number">N√∫mero</label>
                        <input type="text" id="address-number" name="number" required>
                    </div>
                    <div class="form-group">
                        <label for="address-complement">Complemento</label>
                        <input type="text" id="address-complement" name="complement">
                    </div>
                    <div class="form-group">
                        <label for="address-city">Cidade</label>
                        <select id="address-city" name="city" required>
                            <option value="">Selecione uma cidade</option>
                            <option value="Quinze de Novembro">Quinze de Novembro</option>
                            <option value="Selbach">Selbach</option>
                            <option value="Colorado">Colorado</option>
                            <option value="Alto Alegre">Alto Alegre</option>
                            <option value="Fortaleza dos Valos">Fortaleza dos Valos</option>
                            <option value="Tapera">Tapera</option>
                            <option value="Lagoa dos Tr√™s Cantos">Lagoa dos Tr√™s Cantos</option>
                            <option value="Saldanha Marinho">Saldanha Marinho</option>
                            <option value="Espumoso">Espumoso</option>
                            <option value="Campos Borges">Campos Borges</option>
                            <option value="Santa B√°rbara do Sul">Santa B√°rbara do Sul</option>
                            <option value="N√£o-Me-Toque">N√£o-Me-Toque</option>
                            <option value="Boa Vista do Cadeado">Boa Vista do Cadeado</option>
                            <option value="Boa Vista do Incra">Boa Vista do Incra</option>
                            <option value="Carazinho">Carazinho</option>
                            <option value="Ibirub√°">Ibirub√°</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAddressModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="saveAddress()">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Scripts - ORDEM IMPORTANTE -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/app.js"></script>
</body>
</html>